
# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ React + PHP + MySQL

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ä –∑–∞—â–∏—Ç—ã API –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ï–≥–æ —Ü–µ–ª—å ‚Äî –∑–∞—â–∏—Ç–∏—Ç—å –≤–∞—à —Å–µ—Ä–≤–∏—Å –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π, –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ (MITM), –∫—Ä–∞–∂–∏ —Ç–æ–∫–µ–Ω–æ–≤, –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞, XSS, CSRF, –∞ —Ç–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞–¥—ë–∂–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ.

---

## üîê –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: –ø–∞—Ä–æ–ª–∏, —Ç–µ–ª–µ—Ñ–æ–Ω—ã, e-mail –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ë–µ–∑ –∑–∞—â–∏—Ç—ã –≤–æ–∑–º–æ–∂–Ω—ã:
- –∫—Ä–∞–∂–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤,
- —É—Ç–µ—á–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö,
- –ø–æ–¥–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –∫—Ä–∞–∂–∞ —Ç–æ–∫–µ–Ω–æ–≤,
- —É–¥–∞–ª–µ–Ω–∏–µ/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–º.

–ß—Ç–æ–±—ã —ç—Ç–æ–≥–æ –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç—å ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ **–º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –∑–∞—â–∏—Ç—ã**.

---

## 1. –ó–∞—â–∏—Ç–∞ API –∫–ª—é—á–∞–º–∏

**–ß—Ç–æ —ç—Ç–æ:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API —Ç—Ä–µ–±—É—é—Ç `X-API-KEY`, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

**–ü–æ—á–µ–º—É:** –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ API –∏–∑–≤–Ω–µ, –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑–ª–∏—á–∞—Ç—å –ª–µ–≥–∞–ª—å–Ω—ã–µ/–Ω–µ–ª–µ–≥–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã.

**–ü—Ä–∏–º–µ—Ä:**

```php
$headers = getallheaders();
if ($headers['X-API-KEY'] !== 'super_secret_key') {
    http_response_code(403);
    exit('Access Denied');
}
```

---

## 2. –ü—Ä–æ—Ç–æ–∫–æ–ª HTTPS + HSTS

**–ß—Ç–æ —ç—Ç–æ:** –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º + —É–∫–∞–∑–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä—É —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ HTTPS.

**–ü–æ—á–µ–º—É:** –ò—Å–∫–ª—é—á–∞–µ—Ç MITM-–∞—Ç–∞–∫–∏, –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π –ø–æ–¥–º–µ–Ω—É —Ç—Ä–∞—Ñ–∏–∫–∞.

**.htaccess:**

```apache
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
```

---

## 3. –ó–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π

**–ß—Ç–æ —ç—Ç–æ:** –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (`prepared statements`) –≤ PDO –∏–ª–∏ mysqli.

**–ü–æ—á–µ–º—É:** –ò—Å–∫–ª—é—á–∞–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ SQL-–∫–æ–¥–∞ —á–µ—Ä–µ–∑ –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ü—Ä–∏–º–µ—Ä:**

```php
$stmt = $pdo->prepare("SELECT * FROM users WHERE email = :email");
$stmt->execute(['email' => $email]);
```

---

## 4. –ó–∞—â–∏—Ç–∞ –æ—Ç MITM –∏ –∫—Ä–∞–∂–∏ —Å–µ—Å—Å–∏–π

**–†–µ—à–µ–Ω–∏—è:**
- HTTPS + HSTS
- JWT-—Ç–æ–∫–µ–Ω—ã —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º
- Certificate Pinning (–¥–ª—è React Native)

**React Native:**

```js
fetch("https://secure.api.com", {
  sslPinning: { certs: ["api_cert"] }
});
```

---

## 5. –ë—Ä—É—Ç—Ñ–æ—Ä—Å –∏ CSRF

### –ë—Ä—É—Ç—Ñ–æ—Ä—Å:
–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —á–∏—Å–ª–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞ (Redis, —Ñ–∞–π–ª, –ë–î).

```php
$key = 'login:' . $_SERVER['REMOTE_ADDR'];
$attempts = $redis->incr($key);
if ($attempts == 1) $redis->expire($key, 900); // 15 –º–∏–Ω
if ($attempts > 5) exit('Too many attempts');
```

### CSRF:
```php
session_start();
$_SESSION['csrf_token'] = bin2hex(random_bytes(32));
```

HTML:
```html
<input type="hidden" name="csrf_token" value="<?= $_SESSION['csrf_token'] ?>">
```

---

## 6. –ó–∞—â–∏—Ç–∞ –æ—Ç DoS/DDoS

**–ù–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞:**
- Cloudflare proxy
- Fail2Ban / iptables
- Web Application Firewall (IONOS, ModSecurity)

**–ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ:**
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (Rate Limit)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ User-Agent / Referer / Origin

---

## 7. –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π ‚Äî Argon2

**–ü–æ—á–µ–º—É:** –°–∞–º—ã–π –∑–∞—â–∏—â—ë–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π, –≤—Å—Ç—Ä–æ–µ–Ω –≤ PHP.

```php
$hash = password_hash($password, PASSWORD_ARGON2ID);
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```php
if (password_verify($input, $hash)) { ... }
```

---

## 8. JWT (JSON Web Token)

**–ß—Ç–æ —ç—Ç–æ:** –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

```php
$token = JWT::encode(['id' => $userId], 'secret', 'HS256');
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```php
$decoded = JWT::decode($token, new Key('secret', 'HS256'));
```

---

## 9. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞

**–ù–∞ —É—Ä–æ–≤–Ω–µ API:**

```php
if ($user->role !== 'admin') {
    http_response_code(403);
    exit('Insufficient permissions');
}
```

---

## 10. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –≤—Ö–æ–¥—ã
- –ü—Ä–∏ 5+ –ø–æ–ø—ã—Ç–∫–∞—Ö ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP –Ω–∞ 15 –º–∏–Ω—É—Ç

```php
if ($failed_logins >= 5) {
  $ban_until = time() + 900;
  // —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Redis –∏–ª–∏ MySQL
}
```

### IDS/IPS:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Fail2Ban + iptables
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ –ª–æ–≥-—Ñ–∞–π–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/var/log/auth.log`)

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç

- [x] –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ HTTPS
- [x] –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ Argon2id
- [x] JWT-—Ç–æ–∫–µ–Ω—ã
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è SQL
- [x] CORS, CSP, XSS —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- [x] CSRF-—Ç–æ–∫–µ–Ω—ã
- [x] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- [x] API –ø–æ –∫–ª—é—á–∞–º
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫
- [x] –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ WAF/Cloudflare
